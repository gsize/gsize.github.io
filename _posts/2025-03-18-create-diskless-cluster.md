---
layout: post
title: 搭建无盘集群
description: 高性能计算需要大量的计算节点执行并行计算，集群是最主要的选择之一。
category: blog
---

## 简介

从事核物理的蒙卡模拟，需要高性能计算系统，集群是一个不错的选择，而无盘集群更是上佳之选。

它的优缺点如下：（**deeopseek**给出的回答）

***优点***

1. 成本效益：
	  1. 硬件成本低：无盘节点不需要本地硬盘，降低了硬件采购和维护成本。
	  1. 集中管理：操作系统和软件可以集中部署和管理，减少了每个节点的配置和维护工作量。

2. 简化管理：
	  1. 统一更新：只需在中央存储上更新操作系统或软件，所有节点会自动同步，简化了系统更新和维护。
	  1. 快速部署：新节点可以快速加入集群，只需通过网络启动即可，无需单独安装操作系统和软件。

3. 高可用性:
       1. 故障恢复快：如果某个节点出现故障，可以快速替换并重新启动，因为数据和应用都存储在中央存储中。
	   1. 数据一致性：所有节点从同一中央存储加载数据，确保数据一致性。

4. 安全性：
	   1. 数据集中保护：数据存储在中央存储中，可以更容易实施安全措施，如加密和备份。

***缺点***

1. 网络依赖性强：
	   1. 网络瓶颈：所有节点都依赖网络访问中央存储，网络带宽和延迟可能成为性能瓶颈。
	   1. 单点故障：如果中央存储或网络出现故障，整个集群可能无法正常运行。

2. 性能限制：
	   1. I/O性能：无盘节点的I/O性能受限于网络速度和中央存储的性能，可能不如本地磁盘快。
	   1. 启动延迟：节点启动时需要从网络加载操作系统和应用，可能导致启动时间较长。

3. 复杂性：
       1. 配置复杂：无盘集群的配置和管理可能比传统集群更复杂，需要专业的知识和技能。
       1. 网络要求高：需要高性能、低延迟的网络基础设施来支持无盘节点的运行。

4. 扩展性限制：
       1. 存储扩展：中央存储的容量和性能可能成为集群扩展的瓶颈，需要不断升级和扩展中央存储系统。

## 总结

无盘集群在成本效益、简化管理和高可用性方面具有显著优势，但也存在网络依赖性强、性能限制和配置复杂等缺点。

选择是否使用无盘集群应根据具体的应用场景和需求进行权衡。

## 讨论 

目前局域网组个万兆网络比较常见。

对普通的小型计算千兆网也可以承受，用户也没有那么多（几十个以内）。
高性能计算任务简单，计算节点不需要太多。

I/O性能可以通过大内存虚拟文件系统，做快速缓存，补足性能劣势；
文件系统组RAID阵列，提高数据读写速度和存储容量。

高性能计算依赖于单cpu的计算性能，但cpu作为通用处理单元，计算能力有限，需要多节点并行计算。

因此，计算实现必须任务拆解为可并行处理的逻辑；计算期间各个任务之间也有数据交换的需求。

GPU加速是高性能计算的上佳选择，毕竟单机执行比集群的性价比要高出许多。

当然对于有大量用户需求的单位，任何单机系统都搞不定。


## 软件工具

集群计算通常要一套任务管理系统，负责任务调度、性能均衡。

市面上比较流行的工具有：

1. [torque](https://github.com/adaptivecomputing/torque    "torque")
2. [openPBS](https://openpbs.org  "openPBS")
3. [HTCondor](https://htcondor.org    "HTCondor")
4. [Slurm](https://github.com/SchedMD/slurm  "slurm")
5. [LSF](https://www.ibm.com/products/hpc-workload-management    "LSF")

如果计算过程中需要夸节点的进程间通信，数据交换，则需要MPI工具包。
此类工具有：

1. [MPICH](https://www.mpich.org  "MPICH")
1. [OpenMPI](https://www.open-mpi.org  "openMPI")
1. [intelMPI](https://www.intel.com/content/www/us/en/developer/tools/oneapi/mpi-library.html  "intelMPI")

##  组建无盘集群参考网络资料

1. [树梅派组网](https://aoterodelaroza.github.io/devnotes/diskless-rpi-cluster/ "树梅派组网")
1. [pegasus，从linux内核开始](http://thomasvojta.com/pegasus/home.htm "pegasus")
1. [CentOS 7.6无盘集群设置](https://scc.ustc.edu.cn/hmli/doc/linux/centos7.6-diskless/ "CentOS 7.6无盘集群设置"  )


## 期望

许个愿望，有哪个平台给个机会和资源，亲手搭个无盘集群。

[Gsize]:    http://gsize.github.io  "Gsize"


